<!doctype html>
<html lang="pl">
	<head>
		<meta charset="UTF-8" />
		<title>Logowanie</title>
	</head>
	<body>
		<h2>Logowanie</h2>

		<form id="loginForm">
			<input type="email" placeholder="Email" required />
			<input type="password" placeholder="Hasło" required />
			<button>Zaloguj</button>
		</form>

		<script>
			document.getElementById('loginForm').onsubmit = async (e) => {
				e.preventDefault();

				const [email, password] = e.target.querySelectorAll('input');

				const res = await fetch('/api/login', {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({
						email: email.value,
						password: password.value,
					}),
				});

				if (res.ok) {
					location.href = '/';
				} else {
					alert('Błędne dane logowania');
				}
			};
		</script>
	</body>
</html>
